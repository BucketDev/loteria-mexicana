<div *ngIf="board">
    <mat-toolbar color="accent">
        <mat-toolbar-row class="mat-elevation-z4 d-flex justify-content-between">
            <div class="text-truncate">
                <a href="#" [routerLink]="['/']">
                    <img src="https://png.icons8.com/cotton/watermelon--v1/32" alt="logo" class="pb-2">
                </a>
                <small> {{ board.name }}</small>
            </div>
            <button mat-mini-fab color="default" (click)="copyAndShare()">
                <img src="https://png.icons8.com/cotton/copy/24" alt="copiar">
            </button>
        </mat-toolbar-row>
        <mat-toolbar-row *ngIf="players && players.length > 0" class="d-flex justify-content-between">
            <div>
                <mat-chip-list *ngIf="board.gameWon && board.gameStarted">
                    <mat-chip color="primary" selected="true" matBadge="board.winners.length"
                            [matTooltip]="getWinners()"
                            [matTooltipPosition]="'right'">
                        Ganadores</mat-chip>
                </mat-chip-list>
            </div>
            <div>
                <button *ngIf="!board.gameStarted" mat-mini-fab color="default" type="button" class="ml-2"
                        (click)="startGame()">
                    <img src="https://png.icons8.com/color/start/24" alt="configuracion">
                </button>
                <button *ngIf="board.gameStarted" mat-mini-fab color="default" type="button" class="ml-2"
                        (click)="finishGame()" [disabled]="!board.gameWon && playingCards.length > 0">
                    <img src="https://png.icons8.com/color/stop-squared/24" alt="configuracion">
                </button>
                <button mat-mini-fab color="default" (click)="openSettings()" class="ml-2">
                    <img src="https://png.icons8.com/cotton/wrench--v2/24" alt="configuracion">
                </button>
            </div>
        </mat-toolbar-row>
    </mat-toolbar>
    <span *ngIf="!players || players.length === 0; else playersArrived" class="d-block py-5 h3 text-muted text-center">Esperando al primer jugador</span>
    <ng-template #playersArrived>
        <div class="d-flex m-3 justify-content-between">
            <mat-chip-list [matBadge]="players.length">
                <mat-chip color="accent" selected="true">En l√≠nea</mat-chip>
            </mat-chip-list>
            <mat-chip-list *ngIf="board.gameStarted">
                <mat-chip color="accent" selected="true">Cartas {{ calculateRest() }}</mat-chip>
            </mat-chip-list>
        </div>
        <div class="p-2">
            <div *ngIf="!board.gameStarted; else gameStarted" class="d-flex flex-column align-items-center">
                <span class="d-flex justify-content-center align-items-center deck bg-light">
                    Da clic en iniciar
                </span>
            </div>
            <ng-template #gameStarted>
                <div *ngIf="cards && playingCards">
                    <div *ngIf="playingCards.length === 0; else cardsLeft" class="d-flex flex-column align-items-center">
                        <span class="d-flex justify-content-center align-items-center deck shadow-lg bg-light">
                            <img src="https://png.icons8.com/color/galo-de-barcelos/128" alt="mezclar">
                        </span>
                    </div>
                    <ng-template #cardsLeft>
                        <div *ngIf="playingCards" class="d-flex flex-column align-items-center m-3">
                            <div class="deck shadow-lg" matRipple (click)="nextCard()"
                                [style.background-image]="playingCards[playingCards.length - 1].url | uriStyleSanitizer">
                            </div>
                        </div>
                    </ng-template>
                </div>
            </ng-template>
        </div>
    </ng-template>
</div>